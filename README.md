# Memory Tracker

A Rust command-line tool to monitor process memory usage, compute statistics, and generate visual charts.

## Features

- Real-time monitoring of process memory usage (RSS)
- Configurable sampling intervals
- Statistical analysis (mean, median, min, max)
- Visual chart generation (PNG format)
- Optional CSV export for further analysis
- Duration-based or process-lifetime monitoring

## Installation

```bash
cargo build --release
```

The binary will be available at `target/release/memory_tracker`.

## Usage

### Basic usage

Monitor a process until it exits:

```bash
memory_tracker --pid <PID>
```

### Monitor with custom interval

Sample every 500ms:

```bash
memory_tracker --pid <PID> --interval 500
```

### Monitor for specific duration

Monitor for 60 seconds:

```bash
memory_tracker --pid <PID> --duration 60
```

### Custom output file

```bash
memory_tracker --pid <PID> --output my_chart.png
```

### Export to CSV

```bash
memory_tracker --pid <PID> --csv-output memory_data.csv
```

### Complete example

```bash
memory_tracker --pid 12345 --interval 1000 --duration 120 --output result.png --csv-output data.csv
```

## Command-line Options

- `-p, --pid <PID>` - Process ID to monitor (required)
- `-i, --interval <MS>` - Sampling interval in milliseconds (default: 1000)
- `-o, --output <FILE>` - Output image file path (default: memory_usage.png)
- `-d, --duration <SECONDS>` - Duration to monitor in seconds (0 = until process exits, default: 0)
- `-c, --csv-output <FILE>` - Optional CSV file to save memory data

## Output

The tool provides:

1. **Real-time console output** - Current time and memory usage
2. **Statistical summary** - Mean, median, min, and max memory usage
3. **Visual chart** - PNG graph showing memory usage over time
4. **CSV data** (optional) - Raw memory measurements for custom analysis

## Requirements

- Linux system (uses `/proc` filesystem)
- Rust 2021 edition or later

## Dependencies

- `plotters` - Chart generation
- `clap` - Command-line argument parsing
- `anyhow` - Error handling

## TODO

- [ ] Add CPU usage tracking alongside memory monitoring, displaying both metrics on the same chart with dual y-axes (or generate separate output files for each metric)
- [ ] Support reading an external file containing timestamped event markers/flags generated by the monitored process, and overlay these markers as vertical lines or annotations on the generated chart

## License

See repository for license information.
